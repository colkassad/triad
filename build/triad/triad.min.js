/*! triad 2015-03-02 */
function Triad(){}Triad.prototype.getConvexHull=function(a){var b=this;if(a.features.length<=2)return{type:"Feature",geometry:{type:"Polygon",coordinates:[[]]},properties:{}};var c=a.features.map(function(a){return a.geometry.coordinates});c.sort(function(a,b){return a[0]==b[0]?a[1]-b[1]:a[0]-b[0]});for(var d=[],e=0;e<c.length;e++){for(;d.length>=2&&b.crossProduct(d[d.length-2],d[d.length-1],c[e])<=0;)d.pop();d.push(c[e])}for(var f=[],e=c.length-1;e>=0;e--){for(;f.length>=2&&b.crossProduct(f[f.length-2],f[f.length-1],c[e])<=0;)f.pop();f.push(c[e])}f.pop(),d.pop();var g=d.concat(f);g.push(g[0]);var h=JSON.stringify({type:"Feature",geometry:{type:"Polygon",coordinates:[[g]]},properties:{}});return JSON.parse(h)},Triad.prototype.getLineString=function(a){var b=a.features.map(function(a){return a.geometry.coordinates}),c=JSON.stringify({type:"Feature",geometry:b,properties:{}});return JSON.parse(c)},Triad.prototype.getPolygon=function(){},Triad.prototype.inside=function(){},Triad.prototype.getEnvelope=function(a){var b=Number.MAX_VALUE,c=Number.MAX_VALUE,d=Number.MIN_VALUE,e=Number.MIN_VALUE,f=[b,c,d,e];if("Point"===a.geometry.type)return a;if("MultiPoint"===a.geometry.type||"LineString"===a.geometry.type)f=this.expandBBox(a.geometry.coordinates,f);else if("MuliLineString"===a.geometry.type||"Polygon"===a.geometry.type)for(var g=0;g<a.geometry.coordinates.length;g++)f=this.expandBBox(a.geometry.coordinates[g],f);else if("MultiPolygon"===a.geometry.type)for(var g=0;g<a.geometry.coordinates.length;g++)for(var h=0;h<a.geometry.coordinates[g].length;h++)f=this.expandBBox(a.geometry.coordinates[g][h],f);return{type:"Feature",geometry:{type:"Polygon",coordinates:[[[f[0],f[1]],[f[0],f[3]],[f[2],f[3]],[f[2],f[1]],[f[0],f[1]]]]},properties:{}}},Triad.prototype.expandBBox=function(a,b){for(var c=0;c<a.length;c++)a[c][0]<b[0]&&(b[0]=a[c][0]),a[c][0]>b[2]&&(b[2]=a[c][0]),a[c][1]<b[1]&&(b[1]=a[c][1]),a[c][1]>b[3]&&(b[3]=a[c][1]);return b},Triad.prototype.crossProduct=function(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])};